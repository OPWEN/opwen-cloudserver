{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "namespaces_opwenserverqueuesopzrs_name": {
            "defaultValue": "opwenserverqueuesopzrs",
            "type": "String"
        },
        "storageAccounts_opwenclientblobsopzrs5_name": {
            "defaultValue": "opwenclientblobsopzrs5",
            "type": "String"
        },
        "storageAccounts_opwenserverblobsopzrs5_name": {
            "defaultValue": "opwenserverblobsopzrs5",
            "type": "String"
        },
        "storageAccounts_opwenservertablesopzrs_name": {
            "defaultValue": "opwenservertablesopzrs",
            "type": "String"
        }
    },
    "variables": {},
    "resources": [
        // {
        //     "type": "Microsoft.ServiceBus/namespaces",
        //     "apiVersion": "2018-01-01-preview",
        //     "name": "[parameters('namespaces_opwenserverqueuesopzrs_name')]",
        //     "location": "East US",
        //     "sku": {
        //         "name": "Basic",
        //         "tier": "Basic"
        //     },
        //     "properties": {
        //         "zoneRedundant": false
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts",
        //     "apiVersion": "2019-06-01",
        //     "name": "[parameters('storageAccounts_opwenclientblobsopzrs5_name')]",
        //     "location": "eastus",
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "kind": "Storage",
        //     "properties": {
        //         "networkAcls": {
        //             "bypass": "AzureServices",
        //             "virtualNetworkRules": [],
        //             "ipRules": [],
        //             "defaultAction": "Allow"
        //         },
        //         "supportsHttpsTrafficOnly": false,
        //         "encryption": {
        //             "services": {
        //                 "file": {
        //                     "keyType": "Account",
        //                     "enabled": true
        //                 },
        //                 "blob": {
        //                     "keyType": "Account",
        //                     "enabled": true
        //                 }
        //             },
        //             "keySource": "Microsoft.Storage"
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts",
        //     "apiVersion": "2019-06-01",
        //     "name": "[parameters('storageAccounts_opwenserverblobsopzrs5_name')]",
        //     "location": "eastus",
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "kind": "Storage",
        //     "properties": {
        //         "networkAcls": {
        //             "bypass": "AzureServices",
        //             "virtualNetworkRules": [],
        //             "ipRules": [],
        //             "defaultAction": "Allow"
        //         },
        //         "supportsHttpsTrafficOnly": false,
        //         "encryption": {
        //             "services": {
        //                 "file": {
        //                     "keyType": "Account",
        //                     "enabled": true
        //                 },
        //                 "blob": {
        //                     "keyType": "Account",
        //                     "enabled": true
        //                 }
        //             },
        //             "keySource": "Microsoft.Storage"
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts",
        //     "apiVersion": "2019-06-01",
        //     "name": "[parameters('storageAccounts_opwenservertablesopzrs_name')]",
        //     "location": "eastus",
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "kind": "Storage",
        //     "properties": {
        //         "networkAcls": {
        //             "bypass": "AzureServices",
        //             "virtualNetworkRules": [],
        //             "ipRules": [],
        //             "defaultAction": "Allow"
        //         },
        //         "supportsHttpsTrafficOnly": false,
        //         "encryption": {
        //             "services": {
        //                 "file": {
        //                     "keyType": "Account",
        //                     "enabled": true
        //                 },
        //                 "blob": {
        //                     "keyType": "Account",
        //                     "enabled": true
        //                 }
        //             },
        //             "keySource": "Microsoft.Storage"
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/AuthorizationRules",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/celery')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "rights": [
        //             "Manage",
        //             "Send",
        //             "Listen"
        //         ]
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/AuthorizationRules",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/RootManageSharedAccessKey')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "rights": [
        //             "Listen",
        //             "Manage",
        //             "Send"
        //         ]
        //     }
        // },
        {
            "type": "Microsoft.ServiceBus/namespaces/networkRuleSets",
            "apiVersion": "2018-01-01-preview",
            "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/default')]",
            "location": "East US",
            "dependsOn": [
                "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
            ],
            "properties": {
                "defaultAction": "Deny",
                "virtualNetworkRules": [],
                "ipRules": []
            }
        },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/queues",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/inbound')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "lockDuration": "PT1M",
        //         "maxSizeInMegabytes": 5120,
        //         "requiresDuplicateDetection": false,
        //         "requiresSession": false,
        //         "defaultMessageTimeToLive": "P14D",
        //         "deadLetteringOnMessageExpiration": false,
        //         "enableBatchedOperations": true,
        //         "duplicateDetectionHistoryTimeWindow": "PT10M",
        //         "maxDeliveryCount": 10,
        //         "status": "Active",
        //         "autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
        //         "enablePartitioning": false,
        //         "enableExpress": false
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/queues",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/mailboxreceived')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "lockDuration": "PT1M",
        //         "maxSizeInMegabytes": 1024,
        //         "requiresDuplicateDetection": false,
        //         "requiresSession": false,
        //         "defaultMessageTimeToLive": "P14D",
        //         "deadLetteringOnMessageExpiration": false,
        //         "enableBatchedOperations": true,
        //         "duplicateDetectionHistoryTimeWindow": "PT10M",
        //         "maxDeliveryCount": 10,
        //         "status": "Active",
        //         "autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
        //         "enablePartitioning": false,
        //         "enableExpress": false
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/queues",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/mailboxsent')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "lockDuration": "PT1M",
        //         "maxSizeInMegabytes": 1024,
        //         "requiresDuplicateDetection": false,
        //         "requiresSession": false,
        //         "defaultMessageTimeToLive": "P14D",
        //         "deadLetteringOnMessageExpiration": false,
        //         "enableBatchedOperations": true,
        //         "duplicateDetectionHistoryTimeWindow": "PT10M",
        //         "maxDeliveryCount": 10,
        //         "status": "Active",
        //         "autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
        //         "enablePartitioning": false,
        //         "enableExpress": false
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/queues",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/register')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "lockDuration": "PT1M",
        //         "maxSizeInMegabytes": 1024,
        //         "requiresDuplicateDetection": false,
        //         "requiresSession": false,
        //         "defaultMessageTimeToLive": "P14D",
        //         "deadLetteringOnMessageExpiration": false,
        //         "enableBatchedOperations": true,
        //         "duplicateDetectionHistoryTimeWindow": "PT10M",
        //         "maxDeliveryCount": 10,
        //         "status": "Active",
        //         "autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
        //         "enablePartitioning": false,
        //         "enableExpress": false
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/queues",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/send')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "lockDuration": "PT1M",
        //         "maxSizeInMegabytes": 5120,
        //         "requiresDuplicateDetection": false,
        //         "requiresSession": false,
        //         "defaultMessageTimeToLive": "P14D",
        //         "deadLetteringOnMessageExpiration": false,
        //         "enableBatchedOperations": true,
        //         "duplicateDetectionHistoryTimeWindow": "PT10M",
        //         "maxDeliveryCount": 10,
        //         "status": "Active",
        //         "autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
        //         "enablePartitioning": false,
        //         "enableExpress": false
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/queues",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/service')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "lockDuration": "PT1M",
        //         "maxSizeInMegabytes": 1024,
        //         "requiresDuplicateDetection": false,
        //         "requiresSession": false,
        //         "defaultMessageTimeToLive": "P14D",
        //         "deadLetteringOnMessageExpiration": false,
        //         "enableBatchedOperations": true,
        //         "duplicateDetectionHistoryTimeWindow": "PT10M",
        //         "maxDeliveryCount": 10,
        //         "status": "Active",
        //         "autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
        //         "enablePartitioning": false,
        //         "enableExpress": false
        //     }
        // },
        // {
        //     "type": "Microsoft.ServiceBus/namespaces/queues",
        //     "apiVersion": "2017-04-01",
        //     "name": "[concat(parameters('namespaces_opwenserverqueuesopzrs_name'), '/written')]",
        //     "location": "East US",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.ServiceBus/namespaces', parameters('namespaces_opwenserverqueuesopzrs_name'))]"
        //     ],
        //     "properties": {
        //         "lockDuration": "PT1M",
        //         "maxSizeInMegabytes": 5120,
        //         "requiresDuplicateDetection": false,
        //         "requiresSession": false,
        //         "defaultMessageTimeToLive": "P14D",
        //         "deadLetteringOnMessageExpiration": false,
        //         "enableBatchedOperations": true,
        //         "duplicateDetectionHistoryTimeWindow": "PT10M",
        //         "maxDeliveryCount": 10,
        //         "status": "Active",
        //         "autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
        //         "enablePartitioning": false,
        //         "enableExpress": false
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts/blobServices",
        //     "apiVersion": "2019-06-01",
        //     "name": "[concat(parameters('storageAccounts_opwenclientblobsopzrs5_name'), '/default')]",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenclientblobsopzrs5_name'))]"
        //     ],
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "properties": {
        //         "cors": {
        //             "corsRules": []
        //         },
        //         "deleteRetentionPolicy": {
        //             "enabled": false
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts/blobServices",
        //     "apiVersion": "2019-06-01",
        //     "name": "[concat(parameters('storageAccounts_opwenserverblobsopzrs5_name'), '/default')]",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenserverblobsopzrs5_name'))]"
        //     ],
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "properties": {
        //         "cors": {
        //             "corsRules": []
        //         },
        //         "deleteRetentionPolicy": {
        //             "enabled": false
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts/blobServices",
        //     "apiVersion": "2019-06-01",
        //     "name": "[concat(parameters('storageAccounts_opwenservertablesopzrs_name'), '/default')]",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenservertablesopzrs_name'))]"
        //     ],
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "properties": {
        //         "cors": {
        //             "corsRules": []
        //         },
        //         "deleteRetentionPolicy": {
        //             "enabled": false
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts/fileServices",
        //     "apiVersion": "2019-06-01",
        //     "name": "[concat(parameters('storageAccounts_opwenclientblobsopzrs5_name'), '/default')]",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenclientblobsopzrs5_name'))]"
        //     ],
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "properties": {
        //         "cors": {
        //             "corsRules": []
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts/fileServices",
        //     "apiVersion": "2019-06-01",
        //     "name": "[concat(parameters('storageAccounts_opwenserverblobsopzrs5_name'), '/default')]",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenserverblobsopzrs5_name'))]"
        //     ],
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "properties": {
        //         "cors": {
        //             "corsRules": []
        //         }
        //     }
        // },
        // {
        //     "type": "Microsoft.Storage/storageAccounts/fileServices",
        //     "apiVersion": "2019-06-01",
        //     "name": "[concat(parameters('storageAccounts_opwenservertablesopzrs_name'), '/default')]",
        //     "dependsOn": [
        //         "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenservertablesopzrs_name'))]"
        //     ],
        //     "sku": {
        //         "name": "Standard_GRS",
        //         "tier": "Standard"
        //     },
        //     "properties": {
        //         "cors": {
        //             "corsRules": []
        //         }
        //     }
        // },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenservertablesopzrs_name'), '/default/clientsauth')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenservertablesopzrs_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenservertablesopzrs_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenclientblobsopzrs5_name'), '/default/compressedpackages')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenclientblobsopzrs5_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenclientblobsopzrs5_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenserverblobsopzrs5_name'), '/default/emails')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenserverblobsopzrs5_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenserverblobsopzrs5_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenserverblobsopzrs5_name'), '/default/mailbox')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenserverblobsopzrs5_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenserverblobsopzrs5_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenservertablesopzrs_name'), '/default/pendingemails')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenservertablesopzrs_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenservertablesopzrs_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenserverblobsopzrs5_name'), '/default/secrets-opwenclusterg2czekda')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenserverblobsopzrs5_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenserverblobsopzrs5_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenserverblobsopzrs5_name'), '/default/sendgridinboundemails')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenserverblobsopzrs5_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenserverblobsopzrs5_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         },
//         {
//             "type": "Microsoft.Storage/storageAccounts/blobServices/containers",
//             "apiVersion": "2019-06-01",
//             "name": "[concat(parameters('storageAccounts_opwenservertablesopzrs_name'), '/default/users')]",
//             "dependsOn": [
//                 "[resourceId('Microsoft.Storage/storageAccounts/blobServices', parameters('storageAccounts_opwenservertablesopzrs_name'), 'default')]",
//                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_opwenservertablesopzrs_name'))]"
//             ],
//             "properties": {
//                 "publicAccess": "None"
//             }
//         }
//     ]
// }